{"version":3,"sources":["components/bookshelf/add-book.png","components/reader/home.svg","uitls/common.ts","components/common/Checkbox.tsx","uitls/googleAPI.ts","components/common/Header.tsx","uitls/clientDB.ts","uitls/converter.ts","store/LibraryStore.ts","components/bookshelf/Bookshelf.tsx","components/bookshelf/index.ts","uitls/styler.ts","components/reader/Reader.tsx","components/reader/index.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","Checkbox","label","name","value","onChange","type","checked","loadGoogleDriveAPI","window","gapi","client","init","apiKey","process","clientId","discoveryDocs","scope","callGapi","gapiFn","options","Promise","resolve","reject","then","resp","status","console","log","err","createFile","a","drive","files","create","resource","mimeType","parents","fields","result","id","list","query","ret","spaces","pageSize","pageToken","token","orderBy","q","concat","nextPageToken","upload","fileId","body","request","path","method","params","uploadType","useGoogleDrive","useState","isClientLoaded","setIsClientLoaded","isLoggedIn","setIsLoggedIn","updateLogedInState","auth2","getAuthInstance","isSignedIn","get","useEffect","load","listen","signIn","signOut","googleDriveAPI","Header","children","className","onClick","DB_NAME","openDB","upgrade","db","createObjectStore","keyPath","autoIncrement","storeBook","text","cover","tx","transaction","objectStore","add","primaryKey","record","positionElement","timestamp","Date","now","done","updateBook","bookId","book","oldBook","newBook","put","getBookList","getAll","getBookText","convertFB2ToHtml","bookText","parser","DOMParser","el","parseFromString","fetch","res","str","xsl","xsltProcessor","XSLTProcessor","importStylesheet","html","transformToDocument","document","querySelector","getAttribute","dicumentBody","LibraryStore","fetchBooksListAction","action","fetchedBooks","store","books","splice","length","addBookAction","rawBookText","file","innerHTML","removeBookAction","bookIndex","indexOf","slice","updateBookPositionAction","currentReadableBook","find","getBookTextAction","openBookAction","currentBook","meta","filter","observable","React","createContext","observer","useContext","LibraryStoreContext","map","index","BookItem","key","BooksListPlaceholder","AddBookButton","rest","htmlFor","src","AddBookIcon","alt","event","target","reader","FileReader","onload","onerror","error","readAsText","readFileContent","accept","to","Bookshelf","getStyledElement","indexes","Array","keys","sort","Math","random","split","word","join","wrapper","createElement","stylize","element","includes","n","walk","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","push","textNodesUnder","forEach","textElement","styledTextElement","textContent","replaceWith","isOnScreen","screenContainerElement","viewportTop","scrollTop","viewportHeight","clientHeight","viewportBottom","top","offsetTop","height","bottom","dfunc","func","waitFor","timeout","args","clearTimeout","setTimeout","debounce","fn","Reader","numberOfcurrentPage","setNumberOfCurrentPage","currenPositionPercent","setCurrenPositionPercent","pagesCount","setPagesCount","wordsHighlight","setWordsHighlight","showControls","setShowControls","textContainerRef","useRef","elementsForHightlightRef","queryParams","useParams","parseInt","handlePageChange","direction","current","sign","addEventListener","handleScroll","querySelectorAll","b","getElementsForHightlight","round","scrollHeight","getPagesCount","toElement","scrollIntoView","restoreScrollPoition","removeEventListener","HomeIcon","ref","e","elementsForHightlight","percent","getPercentOfScroll","toFixed","getNumberOfCurrentPage","posElement","updateBookPosition","screenElement","allElements","onScreen","i","hightLightElementsOnScreen","App","useLocalStore","Provider","basename","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","initDB","app","ReactDOM","render","getElementById","URL","href","origin","response","contentType","headers","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.d5170aed.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAN11AADddQGsh8ODAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAvpQTFRF////AQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACBJYviwAAAP10Uk5TAAECAwQFBgcICQoL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\"","module.exports = __webpack_public_path__ + \"static/media/home.9a289b28.svg\";","import { BookList } from '../types'\r\n\r\nexport async function getBooksList(): Promise<BookList> {\r\n  return fetch('db.json').then((resp) => resp.json())\r\n}\r\n\r\nexport async function getBook(filePath: string): Promise<string> {\r\n  return fetch(filePath).then((resp) => resp.text())\r\n}\r\n\r\nexport function readFileContent(file: File): Promise<string> {\r\n  const reader = new FileReader()\r\n\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = (event) => {\r\n      return resolve(event?.target?.result + '')\r\n    }\r\n    reader.onerror = (error) => reject('error reading file')\r\n    reader.readAsText(file)\r\n  })\r\n}\r\n\r\nexport const debounce = <F extends (...args: any[]) => any>(\r\n  func: F,\r\n  waitFor: number\r\n) => {\r\n  let timeout: ReturnType<typeof setTimeout> | null = null\r\n\r\n  const debounced = (...args: Parameters<F>) => {\r\n    if (timeout !== null) {\r\n      clearTimeout(timeout)\r\n      timeout = null\r\n    }\r\n    timeout = setTimeout(() => func(...args), waitFor)\r\n  }\r\n\r\n  return debounced as (...args: Parameters<F>) => ReturnType<F>\r\n}\r\n","import React from 'react'\r\n\r\ninterface CheckboxProps {\r\n  label?: string\r\n  name?: string\r\n  value?: boolean\r\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void\r\n}\r\n\r\nexport default function Checkbox({\r\n  label,\r\n  name,\r\n  value,\r\n  onChange,\r\n}: CheckboxProps) {\r\n  return (\r\n    <label>\r\n      <span>{label}</span>\r\n      <input\r\n        type=\"checkbox\"\r\n        name={name}\r\n        checked={value}\r\n        value=\"1\"\r\n        onChange={onChange}\r\n      />\r\n    </label>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\n\r\nfunction loadGoogleAPI() {\r\n  return new Promise((resolve, reject) => {\r\n    if (!window.gapi) return reject('google api is not loaded')\r\n    if (window.gapi.auth2) resolve(window.gapi.auth2)\r\n    window.gapi.load('auth2', () => resolve(window.gapi.auth2))\r\n  })\r\n}\r\n\r\nfunction loadGoogleDriveAPI() {\r\n  const googleDriveAPIDocument =\r\n    'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'\r\n  const scope = 'https://www.googleapis.com/auth/drive.appfolder'\r\n\r\n  return window.gapi.client.init({\r\n    apiKey: process.env.REACT_APP_GOOGLE_API_KEY,\r\n    clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID,\r\n    discoveryDocs: [googleDriveAPIDocument],\r\n    scope,\r\n  })\r\n}\r\ninterface Files {\r\n  id: string\r\n}\r\n\r\ninterface CallGAPI {\r\n  gapiFn: Function\r\n  options: Object\r\n}\r\n\r\nfunction callGapi<CallGAPI>(\r\n  gapiFn: any,\r\n  options: any\r\n): Promise<gapi.client.Response<Files>> {\r\n  return new Promise((resolve, reject) => {\r\n    return gapiFn(options).then(\r\n      (resp: any) => {\r\n        if (resp && (resp.status < 200 || resp.status > 299)) {\r\n          console.log('GAPI call returned bad status', resp)\r\n          reject(resp)\r\n        } else {\r\n          resolve(resp)\r\n        }\r\n      },\r\n      (err: any) => {\r\n        console.log('GAPI call failed', err)\r\n        reject(err)\r\n      }\r\n    )\r\n  })\r\n}\r\n\r\nasync function createFile(name: string) {\r\n  const resp = await callGapi(gapi.client.drive.files.create, {\r\n    resource: {\r\n      name: name,\r\n      mimeType: 'text/plain',\r\n      parents: ['appDataFolder'],\r\n    },\r\n    fields: 'id',\r\n  })\r\n  return resp.result.id\r\n}\r\n\r\nasync function list(query: string = '') {\r\n  let ret: any = []\r\n  let token\r\n  do {\r\n    const resp: any = await callGapi(gapi.client.drive.files.list, {\r\n      spaces: 'appDataFolder',\r\n      fields: 'files(id, name), nextPageToken',\r\n      pageSize: 100,\r\n      pageToken: token,\r\n      orderBy: 'createdTime',\r\n      q: query,\r\n    })\r\n    ret = ret.concat(resp.result.files)\r\n    token = resp.result.nextPageToken\r\n  } while (token)\r\n\r\n  return ret\r\n}\r\n\r\nasync function upload(fileId: string, body: string) {\r\n  return callGapi(gapi.client.request, {\r\n    path: `/upload/drive/v3/files/${fileId}`,\r\n    method: 'PATCH',\r\n    params: { uploadType: 'media' },\r\n    body,\r\n  })\r\n}\r\n\r\nexport default function useGoogleDrive() {\r\n  const [isClientLoaded, setIsClientLoaded] = useState<boolean>(false)\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\r\n  const updateLogedInState = () => {\r\n    const isLoggedIn = window.gapi.auth2.getAuthInstance().isSignedIn.get()\r\n    setIsLoggedIn(isLoggedIn)\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadGoogleAPI()\r\n      .then(loadGoogleDriveAPI)\r\n      .then(() => {\r\n        setIsClientLoaded(true)\r\n        updateLogedInState()\r\n        window.gapi.auth2.getAuthInstance().isSignedIn.listen(() => {\r\n          updateLogedInState()\r\n        })\r\n      })\r\n  }, [])\r\n\r\n  const signIn = () => {\r\n    window.gapi.auth2.getAuthInstance().signIn()\r\n  }\r\n  const signOut = () => window.gapi.auth2.getAuthInstance().signOut()\r\n  const googleDriveAPI = {\r\n    create: createFile,\r\n    list,\r\n    upload,\r\n  }\r\n  return { isClientLoaded, isLoggedIn, signIn, signOut, googleDriveAPI }\r\n}\r\n","import React from 'react'\r\nimport './Header.scss'\r\nimport useGoogleDrive from '../../uitls/googleAPI'\r\n\r\nconst Header: React.FC = ({ children }) => {\r\n  const { isClientLoaded, isLoggedIn, signIn, signOut } = useGoogleDrive()\r\n  return (\r\n    <header className=\"header\">\r\n      {children}\r\n      <div className={isClientLoaded ? '' : 'hidden'}>\r\n        {isLoggedIn ? (\r\n          <button onClick={signOut}>Log Out</button>\r\n        ) : (\r\n          <button onClick={signIn}>Log In</button>\r\n        )}\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import { openDB } from 'idb'\r\nimport { BookList } from '../types'\r\n\r\nconst DB_VERSION = 1\r\nconst DB_NAME = 'library'\r\nconst DB_INDEX_NAME = 'index'\r\nconst DB_STORE_NAME = 'books'\r\n\r\nasync function initDB() {\r\n  return openDB(DB_NAME, DB_VERSION, {\r\n    upgrade(db) {\r\n      db.createObjectStore(DB_INDEX_NAME, { keyPath: 'id' })\r\n      db.createObjectStore(DB_STORE_NAME, { autoIncrement: true })\r\n    },\r\n  })\r\n}\r\n\r\ninterface StoreRecord {\r\n  name: string\r\n  text: string\r\n  cover: string\r\n  positionElement?: string | null\r\n}\r\n\r\nasync function storeBook({ text, name, cover }: StoreRecord) {\r\n  const db = await openDB(DB_NAME, DB_VERSION)\r\n  const tx = db.transaction([DB_INDEX_NAME, DB_STORE_NAME], 'readwrite')\r\n  const primaryKey = await tx.objectStore(DB_STORE_NAME).add(text)\r\n  const record = {\r\n    id: primaryKey,\r\n    name,\r\n    positionElement: null,\r\n    cover,\r\n    timestamp: Date.now(),\r\n  }\r\n\r\n  tx.objectStore(DB_INDEX_NAME).add(record)\r\n  await tx.done\r\n  return record\r\n}\r\n\r\nasync function updateBook(bookId: number, book: any) {\r\n  const db = await openDB(DB_NAME, DB_VERSION)\r\n  const objectStore = db\r\n    .transaction([DB_INDEX_NAME], 'readwrite')\r\n    .objectStore(DB_INDEX_NAME)\r\n  return objectStore.get(bookId).then((oldBook) => {\r\n    const newBook = {\r\n      ...oldBook,\r\n      ...book,\r\n    }\r\n    return objectStore.put(newBook).then(() => newBook)\r\n  })\r\n}\r\n\r\nasync function getBookList(): Promise<BookList> {\r\n  const db = await openDB(DB_NAME, DB_VERSION)\r\n  return db.getAll(DB_INDEX_NAME)\r\n}\r\n\r\nasync function getBookText(id: number) {\r\n  const db = await openDB(DB_NAME, DB_VERSION)\r\n  return db.get(DB_STORE_NAME, id)\r\n}\r\n\r\nexport { initDB, storeBook, getBookList, getBookText, updateBook }\r\n","export async function convertFB2ToHtml(bookText: string) {\r\n  const parser = new DOMParser()\r\n  const el = parser.parseFromString(bookText, 'text/xml')\r\n  return fetch('reader.xsl')\r\n    .then((res) => res.text())\r\n    .then((str) => new window.DOMParser().parseFromString(str, 'text/xml'))\r\n    .then((xsl: any) => {\r\n      const xsltProcessor = new XSLTProcessor()\r\n      xsltProcessor.importStylesheet(xsl)\r\n      const html = xsltProcessor.transformToDocument(el) || document\r\n      const cover =\r\n        html.querySelector('.text-cover img')?.getAttribute('src') || ''\r\n      return {\r\n        dicumentBody: html.body,\r\n        cover,\r\n      }\r\n    })\r\n}\r\n","import React from 'react'\r\nimport { observable, action } from 'mobx'\r\nimport {\r\n  getBookList,\r\n  storeBook,\r\n  updateBook,\r\n  getBookText,\r\n} from '../uitls/clientDB'\r\nimport { BookList, Book } from '../types'\r\nimport { convertFB2ToHtml } from '../uitls/converter'\r\n\r\ntype CurrentBook = {\r\n  meta: Book | null\r\n  text: string\r\n} | null\r\n\r\nexport const LibraryStore = () => {\r\n  const fetchBooksListAction = action(async () => {\r\n    const fetchedBooks = await getBookList()\r\n    // @ts-ignore\r\n    store.books.splice(0, store.books.length, ...fetchedBooks)\r\n  })\r\n\r\n  const addBookAction = action(async (rawBookText: string, file: File) => {\r\n    const { dicumentBody, cover } = await convertFB2ToHtml(rawBookText)\r\n\r\n    return await storeBook({\r\n      name: file.name,\r\n      text: dicumentBody.innerHTML,\r\n      cover,\r\n    })\r\n  })\r\n\r\n  const removeBookAction = action(async (book: Book) => {\r\n    const bookIndex = store.books.indexOf(book)\r\n    store.books.slice(bookIndex, 1)\r\n  })\r\n\r\n  const updateBookPositionAction = action(\r\n    async (bookId: number, positionElement: string) => {\r\n      updateBook(bookId, { positionElement })\r\n      const currentReadableBook = store.books.find((book) => book.id === bookId)\r\n      if (currentReadableBook)\r\n        currentReadableBook.positionElement = positionElement\r\n    }\r\n  )\r\n\r\n  const getBookTextAction = action(getBookText)\r\n\r\n  const openBookAction = action(async (bookId: number) => {\r\n    if (store.currentBook?.meta?.id === bookId) return Promise.resolve()\r\n    await store.fetchBooksListAction()\r\n    const meta = store.books.filter((book: Book) => book.id === bookId)\r\n    return meta.length\r\n      ? getBookText(bookId).then((text: string) => {\r\n          store.currentBook!.meta = meta[0]\r\n          store.currentBook!.text = text\r\n        })\r\n      : Promise.reject({ err: `Book with id: ${bookId} not found` })\r\n  })\r\n\r\n  const store = observable({\r\n    books: [] as BookList,\r\n    getBookTextAction,\r\n    currentBook: { meta: null, text: '' } as CurrentBook,\r\n    fetchBooksListAction,\r\n    addBookAction,\r\n    openBookAction,\r\n    removeBookAction,\r\n    updateBookPositionAction,\r\n  })\r\n\r\n  return store\r\n}\r\n// @ts-ignore\r\nexport default React.createContext()\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { BookList, Book } from '../../types'\r\nimport { Link } from 'react-router-dom'\r\nimport { readFileContent } from '../../uitls/common'\r\nimport './Bookshelf.scss'\r\nimport AddBookIcon from './add-book.png'\r\nimport { Header } from '../common'\r\nimport LibraryStoreContext from '../../store/LibraryStore'\r\nimport { observer } from 'mobx-react'\r\ninterface BookshelfProps {\r\n  books?: BookList\r\n}\r\n\r\nexport default observer(function Bookshelf() {\r\n  // @ts-ignore\r\n  const { books, fetchBooksListAction } = useContext(LibraryStoreContext)\r\n  useEffect(() => {\r\n    fetchBooksListAction()\r\n  }, [fetchBooksListAction])\r\n  return (\r\n    <>\r\n      <Header></Header>\r\n      <div className=\"book-shelf\">\r\n        {books.length ? (\r\n          <div className=\"collection\">\r\n            {books.map((book: Book, index: number) => (\r\n              <BookItem book={book} key={index + book.id} />\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <BooksListPlaceholder />\r\n        )}\r\n        <AddBookButton className=\"add-button-fixed\" />\r\n      </div>\r\n    </>\r\n  )\r\n})\r\n\r\nconst AddBookButton = observer(({ ...rest }: any) => {\r\n  // @ts-ignore\r\n  const { addBookAction } = useContext(LibraryStoreContext)\r\n  function onChangeHandler(event: React.ChangeEvent<HTMLInputElement>) {\r\n    if (event.target.files?.length) {\r\n      const file = event.target.files[0]\r\n      readFileContent(file).then((text: string) => {\r\n        addBookAction(text, file)\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div {...rest}>\r\n      <label className=\"add-book-lable\" htmlFor=\"btn-add-book\">\r\n        <img src={AddBookIcon} alt=\"\" />\r\n        <input\r\n          type=\"file\"\r\n          name=\"\"\r\n          id=\"btn-add-book\"\r\n          onChange={onChangeHandler}\r\n          accept=\".fb2\"\r\n        />\r\n      </label>\r\n    </div>\r\n  )\r\n})\r\n\r\ninterface BookItemProps {\r\n  book: Book\r\n}\r\nconst BookItem = observer(({ book, ...rest }: BookItemProps) => (\r\n  <Link to={`/read/${book.id}`} className=\"book-item\" {...rest}>\r\n    {book.cover ? (\r\n      <img src={book.cover} alt=\"\" />\r\n    ) : (\r\n      <div className=\"name\">{book.name}</div>\r\n    )}\r\n  </Link>\r\n))\r\n\r\nconst BooksListPlaceholder = observer(() => (\r\n  <div className=\"book-list-placeholder\">\r\n    <div className=\"centered\">\r\n      <div>\r\n        Welcome! You haven't uploaded any books yet. Careful Reader supports\r\n        <strong>&nbsp;fb2&nbsp;</strong>\r\n        ones.\r\n      </div>\r\n      <AddBookButton className=\"add-btn-placeholder\" />\r\n    </div>\r\n  </div>\r\n))\r\n","import Bookshelf from './Bookshelf'\r\n\r\nexport default Bookshelf\r\n","const MAX_WORD_CLASSES = 100\r\n\r\nexport function hightLightElementsOnScreen(\r\n  screenElement: any,\r\n  allElements: any\r\n): any[] {\r\n  const onScreen: any[] = []\r\n  if (!screenElement) return onScreen\r\n  const viewportTop = screenElement.scrollTop\r\n  const viewportHeight = screenElement.clientHeight\r\n  const viewportBottom = viewportTop + viewportHeight\r\n  for (let i = 0; i < allElements.length; i++) {\r\n    const el = allElements[i]\r\n    if (isOnScreen(el, screenElement)) {\r\n      stylize(el)\r\n      onScreen.push(el)\r\n    }\r\n    if (el.offsetTop > viewportBottom) {\r\n      break\r\n    }\r\n  }\r\n  return onScreen\r\n}\r\n\r\nexport function getStyledElement(text: string) {\r\n  // const separator = /(?:,| |&nbsp;|\\.)+/\r\n  const indexes = shuffle([...Array(MAX_WORD_CLASSES).keys()])\r\n  const separator = ' '\r\n  let index = 0\r\n  const children = text\r\n    .split(separator)\r\n    .map((word: string) => {\r\n      index = index >= MAX_WORD_CLASSES ? 0 : index + 1\r\n      return `<span class=\"w${indexes[index]}\">${word}</span>`\r\n    })\r\n    .join(separator)\r\n  const wrapper = document.createElement('hlw')\r\n  wrapper.innerHTML = children\r\n  return wrapper\r\n}\r\n\r\nfunction shuffle<T>(array: Array<T>) {\r\n  return array.sort(() => Math.random() - 0.5)\r\n}\r\n\r\nfunction textNodesUnder(el: HTMLElement) {\r\n  let n\r\n  const result = []\r\n  let walk = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null, false)\r\n  while ((n = walk.nextNode())) result.push(n)\r\n  return result\r\n}\r\n\r\nexport function stylize(element: HTMLElement) {\r\n  if (element.className.includes('hg')) return\r\n\r\n  textNodesUnder(element).forEach((textElement: any) => {\r\n    if (textElement) {\r\n      const styledTextElement = getStyledElement(textElement.textContent)\r\n      textElement.replaceWith(styledTextElement)\r\n      element.className += ' hg'\r\n    }\r\n  })\r\n}\r\n\r\nfunction isOnScreen(el: any, screenContainerElement: any) {\r\n  const viewportTop = screenContainerElement.scrollTop\r\n  const viewportHeight = screenContainerElement.clientHeight\r\n  const viewportBottom = viewportTop + viewportHeight\r\n  const top = el.offsetTop\r\n  const height = el.clientHeight\r\n  const bottom = top + height\r\n\r\n  return (\r\n    (top >= viewportTop && top < viewportBottom) ||\r\n    (bottom > viewportTop && bottom <= viewportBottom) ||\r\n    (height > viewportHeight && top <= viewportTop && bottom >= viewportBottom)\r\n  )\r\n}\r\n","import React, { useEffect, useState, useRef, useContext } from 'react'\r\nimport './Reader.scss'\r\nimport { useParams, Link } from 'react-router-dom'\r\nimport { debounce } from '../../uitls/common'\r\nimport { hightLightElementsOnScreen } from '../../uitls/styler'\r\nimport { Checkbox } from '../common'\r\nimport HomeIcon from './home.svg'\r\nimport LibraryStoreContext from '../../store/LibraryStore'\r\nimport { observer } from 'mobx-react'\r\ninterface QueryParams {\r\n  bookId: string\r\n}\r\n\r\nconst dfunc = debounce((fn) => fn && fn(), 100)\r\n\r\nexport default observer(function Reader() {\r\n  // @ts-ignore\r\n  const { updateBookPositionAction, openBookAction, currentBook } = useContext(\r\n    LibraryStoreContext\r\n  )\r\n  const [numberOfcurrentPage, setNumberOfCurrentPage] = useState(0)\r\n  const [currenPositionPercent, setCurrenPositionPercent] = useState('0.0')\r\n  const [pagesCount, setPagesCount] = useState(0)\r\n  const [wordsHighlight, setWordsHighlight] = useState(true)\r\n  const [showControls, setShowControls] = useState(false)\r\n  const textContainerRef = useRef<HTMLDivElement | null>(null)\r\n  const elementsForHightlightRef = useRef([])\r\n\r\n  const queryParams = useParams<QueryParams>()\r\n  const bookId = parseInt(queryParams.bookId)\r\n\r\n  const handlePageChange = (direction: string) => () => {\r\n    const { current } = textContainerRef\r\n    if (current) {\r\n      const sign = direction === 'next' ? 1 : -1\r\n      current.scrollTop += sign * current.clientHeight\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    openBookAction(bookId)\r\n  }, [bookId, openBookAction])\r\n\r\n  useEffect(() => {\r\n    const { current } = textContainerRef\r\n    if (currentBook.meta && currentBook.meta.id === bookId) {\r\n      current!.innerHTML = currentBook.text\r\n      current!.addEventListener('scroll', handleScroll)\r\n      elementsForHightlightRef.current = getElementsForHightlight()\r\n      setPagesCount(getPagesCount())\r\n      restoreScrollPoition()\r\n    }\r\n    return () => {\r\n      return current!.removeEventListener('scroll', handleScroll)\r\n    }\r\n  }, [currentBook.meta])\r\n\r\n  return (\r\n    <div className={`reader list-view ${wordsHighlight ? 'highlight' : ''}`}>\r\n      <div className={`text-info${showControls ? '' : ' hidden'}`}>\r\n        <div>\r\n          <Checkbox\r\n            label=\"highlight\"\r\n            value={wordsHighlight}\r\n            onChange={toggleHightligting}\r\n          />\r\n        </div>\r\n        <div className=\"\">{currenPositionPercent}%</div>\r\n        <div className=\"pages\">\r\n          {numberOfcurrentPage} / {pagesCount}\r\n        </div>\r\n        <Link className=\"home\" to=\"/\">\r\n          <img src={HomeIcon} alt=\"\" />\r\n        </Link>\r\n      </div>\r\n\r\n      <div\r\n        className=\"text-container\"\r\n        onClick={toggleMenuHandler}\r\n        ref={textContainerRef}\r\n      ></div>\r\n      <div className=\"prev-page\" onClick={handlePageChange('prev')}></div>\r\n      <div className=\"next-page\" onClick={handlePageChange('next')}></div>\r\n    </div>\r\n  )\r\n\r\n  function getElementsForHightlight() {\r\n    const result: any = []\r\n    document.querySelectorAll('p').forEach((el: any) => {\r\n      result.push(el)\r\n    })\r\n    return result.sort((a: any, b: any) => a.offsetTop > b.offsetTop)\r\n  }\r\n\r\n  function handleScroll(e: Event) {\r\n    const { current } = textContainerRef\r\n    const { current: elementsForHightlight } = elementsForHightlightRef\r\n    if (current) {\r\n      const percent = getPercentOfScroll()\r\n      setCurrenPositionPercent(percent.toFixed(2))\r\n      setNumberOfCurrentPage(getNumberOfCurrentPage())\r\n      dfunc(() => {\r\n        const onScreen =\r\n          hightLightElementsOnScreen(current, elementsForHightlight) || []\r\n        updateBookPosition(onScreen[0])\r\n      })\r\n    }\r\n  }\r\n\r\n  function restoreScrollPoition() {\r\n    if (currentBook.meta) {\r\n      const toElement = document.querySelector(\r\n        `[data-id=\"${currentBook.meta.positionElement}\"]`\r\n      )\r\n      toElement?.scrollIntoView()\r\n    }\r\n  }\r\n\r\n  function getPercentOfScroll() {\r\n    const { current } = textContainerRef\r\n    return current ? (current.scrollTop * 100) / current.scrollHeight : 0.0\r\n  }\r\n\r\n  function updateBookPosition(posElement: HTMLElement) {\r\n    if (posElement) {\r\n      const positionElement = posElement.getAttribute('data-id')\r\n      updateBookPositionAction(bookId, positionElement)\r\n    }\r\n  }\r\n\r\n  function getPagesCount() {\r\n    const { current } = textContainerRef\r\n    return Math.round(current!.scrollHeight / current!.clientHeight)\r\n  }\r\n\r\n  function getNumberOfCurrentPage() {\r\n    const { current } = textContainerRef\r\n    return Math.round(current!.scrollTop / current!.clientHeight)\r\n  }\r\n\r\n  function toggleHightligting() {\r\n    setWordsHighlight(!wordsHighlight)\r\n  }\r\n\r\n  function toggleMenuHandler() {\r\n    setShowControls(!showControls)\r\n  }\r\n})\r\n","import Reader from './Reader'\r\n\r\nexport default Reader\r\n","import React from 'react'\r\nimport './App.scss'\r\nimport Bookshelf from './components/bookshelf'\r\nimport Reader from './components/reader'\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\nimport { observer, useLocalStore } from 'mobx-react'\r\nimport LibraryStoreContext, { LibraryStore } from './store/LibraryStore'\r\n\r\nconst App = observer(function App() {\r\n  const store = useLocalStore(LibraryStore)\r\n  const basename =\r\n    process.env.NODE_ENV === 'development' ? '/' : process.env.PUBLIC_URL\r\n\r\n  return (\r\n    <LibraryStoreContext.Provider value={store}>\r\n      <Router basename={basename}>\r\n        <Switch>\r\n          <Route path=\"/read/:bookId\">\r\n            <Reader />\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <Bookshelf />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </LibraryStoreContext.Provider>\r\n  )\r\n})\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport { initDB } from './uitls/clientDB'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\ninitDB()\r\n\r\nconst app = <App />\r\n\r\nReactDOM.render(app, document.getElementById('root'))\r\nserviceWorker.register()\r\n"],"sourceRoot":""}