(this["webpackJsonpcareful-reader-app"]=this["webpackJsonpcareful-reader-app"]||[]).push([[0],{19:function(A,e){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAN11AADddQGsh8ODAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAvpQTFRF////AQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACBJYviwAAAP10Uk5TAAECAwQFBgcICQoL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"},22:function(A,e,t){A.exports=t.p+"static/media/home.9a289b28.svg"},24:function(A,e,t){A.exports=t(42)},29:function(A,e,t){},30:function(A,e,t){},32:function(A,e,t){},41:function(A,e,t){},42:function(A,e,t){"use strict";t.r(e);var n=t(0),r=t.n(n),a=t(18),o=t.n(a),c=(t(29),t(5)),Q=(t(30),t(23)),i=t(8),C=t(1),u=t.n(C),l=t(2);t(32);var s=t(19),f=t.n(s);function d(A){var e=A.books,t=void 0===e?[]:e,a=Object(n.useContext)(T);return r.a.createElement("div",{className:"book-shelf"},r.a.createElement("div",{className:"collection"},t.map((function(A){return r.a.createElement(g,{book:A,key:A.id})}))),r.a.createElement("label",{className:"add-book-lable",htmlFor:"btn-add-book"},r.a.createElement("img",{src:f.a,alt:""}),r.a.createElement("input",{type:"file",name:"",id:"btn-add-book",onChange:function(A){var e;if(null===(e=A.target.files)||void 0===e?void 0:e.length){var t=A.target.files[0];(function(A){var e=new FileReader;return new Promise((function(t,n){e.onload=function(A){var e;return t((null===A||void 0===A?void 0:null===(e=A.target)||void 0===e?void 0:e.result)+"")},e.onerror=function(A){return n("error reading file")},e.readAsText(A)}))})(t).then((function(A){a({type:"add_book",payload:{text:A,file:t}})}))}},accept:".fb2"})))}var g=function(A){var e=A.book,t=Object(Q.a)(A,["book"]);return r.a.createElement(i.b,Object.assign({to:"/read/".concat(e.id),className:"book-item"},t),r.a.createElement("div",{className:"name"},e.name))},p=(t(41),t(7)),b=t(13);function w(A){var e=Object(b.a)(Array(100).keys()).sort((function(){return Math.random()-.5})),t=0,n=A.split(" ").map((function(A){return'<span class="w'.concat(e[t=t>=100?0:t+1],'">').concat(A,"</span>")})).join(" "),r=document.createElement("hlw");return r.innerHTML=n,r}function v(A){(function(A){for(var e,t=[],n=document.createTreeWalker(A,NodeFilter.SHOW_TEXT,null,!1);e=n.nextNode();)t.push(e);return t})(A).forEach((function(e){if(e&&!A.className.includes("hg")){var t=w(e.textContent);e.replaceWith(t),A.className+=" hg"}}))}function m(A,e){var t=e.scrollTop,n=e.clientHeight,r=t+n,a=A.offsetTop,o=A.clientHeight,c=a+o;return a>=t&&a<r||c>t&&c<=r||o>n&&a<=t&&c>=r}function B(A){var e=A.label,t=A.name,n=A.value,a=A.onChange;return r.a.createElement("label",null,r.a.createElement("span",null,e),r.a.createElement("input",{type:"checkbox",name:t,checked:n,value:"1",onChange:a}))}var h=t(6),E=t(9),y="library";function D(){return(D=Object(l.a)(u.a.mark((function A(){return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(E.a)(y,1,{upgrade:function(A){A.createObjectStore("index",{keyPath:"id"}),A.createObjectStore("books",{autoIncrement:!0})}}));case 1:case"end":return A.stop()}}),A)})))).apply(this,arguments)}function k(A,e){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark((function A(e,t){var n,r,a,o;return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Object(E.a)(y,1);case 2:return n=A.sent,r=n.transaction(["index","books"],"readwrite"),A.next=6,r.objectStore("books").add(e);case 6:return a=A.sent,o={id:a,name:t.name,positionElement:null},r.objectStore("index").add(o),A.next=11,r.done;case 11:return A.abrupt("return",o);case 12:case"end":return A.stop()}}),A)})))).apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark((function A(e,t){var n,r;return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Object(E.a)(y,1);case 2:return n=A.sent,r=n.transaction(["index"],"readwrite").objectStore("index"),A.abrupt("return",r.get(e).then((function(A){var e=Object(h.a)(Object(h.a)({},A),t);return r.put(e).then((function(){return e}))})));case 5:case"end":return A.stop()}}),A)})))).apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function A(){var e;return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Object(E.a)(y,1);case 2:return e=A.sent,A.abrupt("return",e.getAll("index"));case 4:case"end":return A.stop()}}),A)})))).apply(this,arguments)}function F(){return(F=Object(l.a)(u.a.mark((function A(e){var t;return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Object(E.a)(y,1);case 2:return t=A.sent,A.abrupt("return",t.get("books",e));case 4:case"end":return A.stop()}}),A)})))).apply(this,arguments)}var U=t(22),N=t.n(U),Y=function(A,e){var t=null;return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];null!==t&&(clearTimeout(t),t=null),t=setTimeout((function(){return A.apply(void 0,r)}),e)}}((function(A){return A&&A()}),100);function X(){var A=Object(n.useContext)(T),e=Object(n.useContext)(W),t=Object(n.useState)(0),a=Object(c.a)(t,2),o=a[0],Q=a[1],C=Object(n.useState)("0.0"),u=Object(c.a)(C,2),l=u[0],s=u[1],f=Object(n.useState)(0),d=Object(c.a)(f,2),g=d[0],b=d[1],w=Object(n.useState)(!0),h=Object(c.a)(w,2),E=h[0],y=h[1],D=Object(n.useRef)(null),k=Object(n.useRef)([]),O=Object(p.f)(),x=parseInt(O.bookId);function j(e){var t=D.current,n=k.current;if(t){var r=function(){var A=D.current;return A?100*A.scrollTop/A.scrollHeight:0}();s(r.toFixed(2)),Q(function(){var A=D.current;return Math.round(A.scrollTop/A.clientHeight)}()),Y((function(){!function(e){if(e){var t=e.getAttribute("data-id");A({type:"update_book_position",payload:{bookId:x,positionElement:t}})}}((function(A,e){var t=[];if(!A)return t;for(var n=A.scrollTop+A.clientHeight,r=0;r<e.length;r++){var a=e[r];if(m(a,A)&&(v(a),t.push(a)),a.offsetTop>n)break}return t}(t,n)||[])[0])}))}}var U=function(A){return function(){var e=D.current;if(e){var t="next"===A?1:-1;e.scrollTop+=t*e.clientHeight}}};return Object(n.useEffect)((function(){var A=D.current;return function(A){return F.apply(this,arguments)}(x).then((function(t){A.innerHTML=t,b(function(){var A=D.current;return Math.round(A.scrollHeight/A.clientHeight)}()),function(){var A=e.find((function(A){return A.id===x}));if(A){var t=document.querySelector('[data-id="'.concat(A.positionElement,'"]'));null===t||void 0===t||t.scrollIntoView()}}(),k.current=function(){var A=[];return document.querySelectorAll("p").forEach((function(e){A.push(e)})),A.sort((function(A,e){return A.offsetTop>e.offsetTop}))}(),A.addEventListener("scroll",j)})),function(){return A.removeEventListener("scroll",j)}}),[]),r.a.createElement("div",{className:"reader list-view ".concat(E?"highlight":"")},r.a.createElement("div",{className:"text-info"},r.a.createElement(i.b,{className:"home",to:"".concat("/careful-reader","/")},r.a.createElement("img",{src:N.a,alt:""})),r.a.createElement("div",null,r.a.createElement(B,{label:"highlight",value:E,onChange:function(){return y(!E)}})),r.a.createElement("div",{className:""},l,"%"),r.a.createElement("div",{className:"pages"},o," / ",g)),r.a.createElement("div",{className:"text-container",ref:D}),r.a.createElement("div",{className:"prev-page",onClick:U("prev")}),r.a.createElement("div",{className:"next-page",onClick:U("next")}))}function z(A){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(u.a.mark((function A(e){var t,n;return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=new DOMParser,n=t.parseFromString(e,"text/xml"),A.abrupt("return",fetch("reader.xsl").then((function(A){return A.text()})).then((function(A){return(new window.DOMParser).parseFromString(A,"text/xml")})).then((function(A){var e=new XSLTProcessor;return e.importStylesheet(A),e.transformToDocument(n)})));case 3:case"end":return A.stop()}}),A)})))).apply(this,arguments)}var M=[];function H(){var A=Object(n.useCallback)((function(A,e){return function(A,e){switch(e.type){case"set_books_list":return e.payload;case"add_book_to_list":return[].concat(Object(b.a)(A),[e.payload]);case"fetch_books_list":return function(){return j.apply(this,arguments)}().then((function(A){return o({type:"set_books_list",payload:A})})),A;case"add_book":var t=e.payload,n=t.text,r=t.file;return function(A,e){return P.apply(this,arguments)}(n,r).then((function(A){return o({type:"add_book_to_list",payload:A})})),A;case"update_book_position":var a=e.payload,c=a.bookId,Q=a.positionElement;return function(A,e){x.apply(this,arguments)}(c,{positionElement:Q}),A.map((function(A){return A.id===c?Object(h.a)(Object(h.a)({},A),{positionElement:Q}):A}))}return A}(A,e)}),[]),e=r.a.useReducer(A,M),t=Object(c.a)(e,2),a=t[0],o=t[1];return[a,o]}function P(){return(P=Object(l.a)(u.a.mark((function A(e,t){var n;return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,z(e);case 2:return n=A.sent,A.next=5,k(n.body.innerHTML,t);case 5:return A.abrupt("return",A.sent);case 6:case"end":return A.stop()}}),A)})))).apply(this,arguments)}var W=r.a.createContext([]),T=r.a.createContext((function(A){}));var q=function(){var A=H(),e=Object(c.a)(A,2),t=e[0],a=e[1];return Object(n.useEffect)((function(){a({type:"fetch_books_list"})}),[a]),r.a.createElement(W.Provider,{value:t},r.a.createElement(T.Provider,{value:a},r.a.createElement(i.a,{basename:"/careful-reader"},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/read/:bookId"},r.a.createElement(X,null)),r.a.createElement(p.a,{path:"/"},r.a.createElement(d,{books:t}))))))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(A,e){navigator.serviceWorker.register(A).then((function(A){A.onupdatefound=function(){var t=A.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(A)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(A)))})}})).catch((function(A){console.error("Error during service worker registration:",A)}))}!function(){D.apply(this,arguments)}();var L=r.a.createElement(q,null);o.a.render(L,document.getElementById("root")),function(A){if("serviceWorker"in navigator){if(new URL("/careful-reader",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/careful-reader","/service-worker.js");G?(!function(A,e){fetch(A).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(A){A.unregister().then((function(){window.location.reload()}))})):J(A,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,A),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):J(e,A)}))}}()}},[[24,1,2]]]);
//# sourceMappingURL=main.220ae926.chunk.js.map